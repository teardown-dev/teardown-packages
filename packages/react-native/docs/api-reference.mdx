---
title: API Reference
description: Complete API reference for the Teardown React Native SDK.
icon: Code
---

## TeardownCore

The main SDK class that orchestrates all clients.

### Constructor

```typescript
new TeardownCore(options: TeardownCoreOptions)
```

### TeardownCoreOptions

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `org_id` | `string` | Yes | Organization ID from dashboard |
| `project_id` | `string` | Yes | Project ID from dashboard |
| `api_key` | `string` | Yes | API key from dashboard |
| `environment_slug` | `string` | No | Environment slug (default: "production") |
| `ingestUrl` | `string` | No | Custom ingest API URL for local/staging |
| `storageAdapter` | `StorageAdapter` | Yes | Storage adapter instance |
| `deviceAdapter` | `DeviceInfoAdapter` | Yes | Device info adapter instance |
| `notificationAdapter` | `NotificationAdapter` | No | Push notification adapter instance |
| `forceUpdate` | `ForceUpdateClientOptions` | No | Force update configuration |

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `setLogLevel(level)` | `void` | Set logging verbosity |
| `shutdown()` | `void` | Cleanup SDK resources |

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `api` | `ApiClient` | Backend API client |
| `device` | `DeviceClient` | Device information client |
| `events` | `EventsClient` | Event tracking client |
| `identity` | `IdentityClient` | Identity management client |
| `forceUpdate` | `ForceUpdateClient` | Version checking client |
| `notifications` | `NotificationsClient \| undefined` | Push notifications client (if adapter provided) |

---

## IdentityClient

Manages user and device identification.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `identify(persona?)` | `AsyncResult<IdentityUser>` | Identify user/device |
| `refresh()` | `AsyncResult<IdentityUser>` | Re-identify current user |
| `signOut(options?)` | `AsyncResult<void>` | Sign out user, preserve device |
| `signOutAll(options?)` | `AsyncResult<void>` | Sign out and reset device |
| `getIdentifyState()` | `IdentifyState` | Get current state |
| `getSessionState()` | `Session \| null` | Get current session |
| `onIdentifyStateChange(listener)` | `() => void` | Subscribe to state changes |
| `shutdown()` | `void` | Cleanup listeners |

### Persona

```typescript
interface Persona {
  user_id?: string;
  email?: string;
  name?: string;
}
```

### Session

```typescript
interface Session {
  session_id: string;
  device_id: string;
  user_id: string;
  token: string;
}
```

### IdentifyState

```typescript
type IdentifyState =
  | { type: 'unidentified' }
  | { type: 'identifying' }
  | { type: 'identified'; session: Session; version_info: VersionInfo };
```

### SignOutOptions

```typescript
interface SignOutOptions {
  // Additional properties to include in the sign out event
  properties?: Record<string, unknown>;
  // Wait for event to be sent before clearing state (default: true)
  waitForEvent?: boolean;
}
```

---

## ForceUpdateClient

Manages version checking and force updates.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `getVersionStatus()` | `VersionStatus` | Get current version status |
| `onVersionStatusChange(listener)` | `() => void` | Subscribe to status changes |
| `shutdown()` | `void` | Cleanup listeners |

### ForceUpdateClientOptions

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| `checkIntervalMs` | `number` | `300000` | Min time between checks. `0` = every foreground, `-1` = disabled |
| `checkOnForeground` | `boolean` | `true` | Check when app foregrounds |
| `identifyAnonymousDevice` | `boolean` | `false` | Check when not identified |

### VersionStatus

```typescript
type VersionStatus =
  | { type: 'initializing' }
  | { type: 'checking' }
  | { type: 'up_to_date' }
  | { type: 'update_available'; releaseNotes?: string | null }
  | { type: 'update_recommended'; releaseNotes?: string | null }
  | { type: 'update_required'; releaseNotes?: string | null }
  | { type: 'disabled' };
```

---

## EventsClient

Tracks events to the backend.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `track(event, sessionId?)` | `AsyncResult<void>` | Track a single event |
| `trackBatch(events, sessionId?)` | `AsyncResult<void>` | Track multiple events |

### EventPayload

```typescript
interface EventPayload {
  /** Name of the event (e.g., "button_clicked", "page_viewed") */
  event_name: string;
  /** Type of event */
  event_type?: "action" | "screen_view" | "custom";
  /** Additional properties to attach to the event */
  properties?: Record<string, unknown>;
  /** ISO timestamp. Defaults to current time if not provided */
  timestamp?: string;
}
```

### Usage

```typescript
const { core } = useTeardown();

// Track a single event
await core.events.track({
  event_name: 'button_clicked',
  event_type: 'action',
  properties: { button_id: 'submit-form' }
});

// Track multiple events
await core.events.trackBatch([
  { event_name: 'page_viewed', event_type: 'screen_view', properties: { page: 'home' } },
  { event_name: 'cta_shown', event_type: 'action' }
]);
```

---

## NotificationsClient

Manages push notifications across different providers. Only available if `notificationAdapter` is provided in TeardownCore options.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `requestPermissions()` | `Promise<PermissionStatus>` | Request notification permissions |
| `getToken()` | `Promise<string \| null>` | Get push notification token |
| `onTokenChange(listener)` | `Unsubscribe` | Subscribe to token changes |
| `onNotificationReceived(listener)` | `Unsubscribe` | Subscribe to foreground notifications |
| `onNotificationOpened(listener)` | `Unsubscribe` | Subscribe to notification taps |
| `onDataMessage(listener)` | `Unsubscribe` | Subscribe to silent/data messages |
| `destroy()` | `void` | Cleanup resources |

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `platform` | `NotificationPlatformEnum` | Notification platform (APNS, FCM, EXPO) |

### PermissionStatus

```typescript
interface PermissionStatus {
  granted: boolean;
  canAskAgain: boolean;
}
```

### PushNotification

```typescript
interface PushNotification {
  title?: string;
  body?: string;
  data?: Record<string, unknown>;
}
```

### DataMessage

```typescript
interface DataMessage {
  data: Record<string, unknown>;
}
```

### NotificationPlatformEnum

```typescript
enum NotificationPlatformEnum {
  APNS = "APNS",  // Apple Push Notification Service
  FCM = "FCM",    // Firebase Cloud Messaging
  EXPO = "EXPO",  // Expo Push Notifications
}
```

### Usage

```typescript
const { core } = useTeardown();

if (core.notifications) {
  // Request permissions
  const status = await core.notifications.requestPermissions();

  // Get token for backend
  const token = await core.notifications.getToken();

  // Listen for foreground notifications
  const unsub = core.notifications.onNotificationReceived((notification) => {
    console.log('Notification:', notification.title);
  });

  // Cleanup
  unsub();
}
```

---

## DeviceClient

Collects device information.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `getDeviceId()` | `Promise<string>` | Get stable device UUID |
| `getDeviceInfo()` | `Promise<DeviceInfo>` | Get full device info |
| `reset()` | `void` | Clear stored deviceId (new ID on next call) |

### DeviceInfo

```typescript
interface DeviceInfo {
  timestamp?: Date;
  os: OSInfo;
  hardware: HardwareInfo;
  application: ApplicationInfo;
  update: DeviceUpdateInfo | null;
  notifications?: NotificationsInfo;
}
```

---

## StorageAdapter

Abstract class for storage implementations.

### Methods

| Method | Returns | Description |
|--------|---------|-------------|
| `createStorage(key)` | `SupportedStorage` | Create namespaced storage |

### SupportedStorage

```typescript
interface SupportedStorage {
  preload(): void;
  getItem(key: string): string | null;
  setItem(key: string, value: string): void;
  removeItem(key: string): void;
  clear(): void;
  keys(): string[];
}
```

---

## DeviceInfoAdapter

Interface for device information adapters.

### Properties

| Property | Type | Description |
|----------|------|-------------|
| `applicationInfo` | `ApplicationInfo` | App version info |
| `hardwareInfo` | `HardwareInfo` | Device hardware info |
| `osInfo` | `OSInfo` | Operating system info |

### ApplicationInfo

```typescript
interface ApplicationInfo {
  version: string;
  build_number: number;
}
```

### HardwareInfo

```typescript
interface HardwareInfo {
  device_name: string;
  device_brand: string;
  device_type: string;
}
```

### OSInfo

```typescript
interface OSInfo {
  platform: DevicePlatformEnum;
  name: string;
  version: string;
}
```

### DevicePlatformEnum

```typescript
enum DevicePlatformEnum {
  IOS = "IOS",
  ANDROID = "ANDROID",
  WEB = "WEB",
  WINDOWS = "WINDOWS",
  MACOS = "MACOS",
  LINUX = "LINUX",
  UNKNOWN = "UNKNOWN",
  // ... and more
}
```

---

## AsyncResult

Type-safe result type for async operations.

```typescript
type AsyncResult<T> =
  | { success: true; data: T }
  | { success: false; error: string };
```

### Usage

```typescript
const result = await core.identity.identify({ user_id: '123' });

if (result.success) {
  console.log(result.data.session_id);
} else {
  console.error(result.error);
}
```
